(this.webpackJsonpwebskapp=this.webpackJsonpwebskapp||[]).push([[0],{24:function(e,n,t){},44:function(e,n,t){"use strict";t.r(n);var c=t(2),r=t.n(c),a=t(19),i=t.n(a),o=(t(24),t(3)),u=t(10),d=t(5),l=t.n(d),f="/api/persons",s={getAll:function(){return l.a.get(f)},create:function(e){return l.a.post(f,e)},update:function(e,n){return l.a.put("".concat(f,"/").concat(e),n)},remove:function(e){return l.a.delete("".concat(f,"/").concat(e))}},b=t(0),j=function(e){var n=e.name,t=e.number,c=e.onDelete;return Object(b.jsxs)("div",{children:[Object(b.jsxs)("p",{children:[n," ",t]}),Object(b.jsx)("button",{onClick:c,children:"Delete"})]})},m=function(e){var n=e.list,t=e.filter,c=e.onDelete;return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Numbers"}),n.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())})).map((function(e,n){return Object(b.jsx)(j,{name:e.name,number:e.number,onDelete:function(n){return c(e.id)}},n)}))]})},h=function(e){var n=e.onChange,t=e.fieldName,c=e.value;return Object(b.jsxs)("div",{children:[t,Object(b.jsx)("input",{value:c,onChange:function(e){return n(e)}})]})},p=function(e){var n=e.fields,t=e.onSubmit;return Object(b.jsxs)("form",{onSubmit:function(e){return t(e)},children:[n.map((function(e,n){return Object(b.jsx)(h,{fieldName:e.fieldName,value:e.value,onChange:e.onChange},n)}))," ",Object(b.jsx)("div",{children:Object(b.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.message;return null===n?null:0===n.id?Object(b.jsx)("div",{style:{color:"red",backGround:"pink",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n.c}):Object(b.jsx)("div",{style:{color:"green",backGround:"lightgreen",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"},children:n.c})},v=function(){var e=Object(c.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(c.useState)(""),i=Object(o.a)(a,2),d=i[0],l=i[1],f=Object(c.useState)(""),j=Object(o.a)(f,2),v=j[0],x=j[1],g=Object(c.useState)(""),w=Object(o.a)(g,2),S=w[0],k=w[1],y=Object(c.useState)(null),C=Object(o.a)(y,2),D=C[0],N=C[1],A=function(e,n){N({c:e,id:n}),setTimeout((function(){N(null)}),5e3)};Object(c.useEffect)((function(){s.getAll().then((function(e){r(e.data)}))}),[]);var B=[{onChange:function(e){return function(e){l(e.target.value)}(e)},fieldName:"Add Name",value:d},{onChange:function(e){return function(e){x(e.target.value)}(e)},fieldName:"Add Number",value:v}];return Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"Phonebook"}),Object(b.jsx)(O,{message:D}),Object(b.jsx)(h,{onChange:function(e){return function(e){k(e.target.value)}(e)},fieldName:"Filter",value:S}),Object(b.jsx)(p,{fields:B,onSubmit:function(e){return function(e){e.preventDefault();var n={name:d,number:v},c=Object(u.a)(t).filter((function(e){return e.name===d}));if(c.length>0)if(c[0].number!==v){if(window.confirm("".concat(d," is already added to phonebook, replace old number with new one?"))){var a=c[0].id;s.getAll.then((function(e){r(e.data)})).update(a,n).then((function(e){r(t.map((function(n){return n.id!==e.data.id?n:e.data}))),A("".concat(n.number,"updated number!"),1)})).catch((function(e){A("updating number failed",0)})),l(""),x("")}}else alert("".concat(d," is already added to phonebook"));else s.create(n).then((function(e){r(t.concat(e.data)),A("".concat(n.name,"Added number!"),1)})).catch((function(e){A("".concat(e,"Adding number failed"),0)})),l(""),x("")}(e)}}),Object(b.jsx)(m,{list:t,filter:S,onDelete:function(e){return function(e){var n=Object(u.a)(t).find((function(n){return n.id===e})).name;window.confirm("Do you really want to delete ".concat(n))&&(s.remove(e).then((function(c){A("Deleted ".concat(n,"'s number!"),1),r(t.filter((function(n){return n.id!==e})))})).catch((function(e){A("Deleting number failed",0)})),s.getAll().then((function(e){r(e.data)})))}(e)}})]})};i.a.render(Object(b.jsx)(r.a.StrictMode,{children:Object(b.jsx)(v,{})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.36446681.chunk.js.map